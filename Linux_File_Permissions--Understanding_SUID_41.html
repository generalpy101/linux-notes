<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Understanding SUID</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Understanding SUID</h1><br/><p>Let&#39;s first talk about command execution permission levels.</p><p></p><p><img src="images/41-1.png" alt="images/41-1.png" /></p><p></p><p>In linux, when commands are executed, they are run by privileges of user executing them instead of owner&#39;s permissions. For eg, above is binary for cat command which has owner root. If command is run by any other user than root, the command will be run by user&#39;s privileges. Like when we try to access some file like /etc/shadow, which can only be seen by root, cat will give permission denied error for other users . This is like a security feature, which if wasn&#39;t there, could have caused a lot of probems. But there are some situations like changing password, which require access of shadow file, so according to above architecture, simple user cannot change password. In situation like these, we need to run commands as root whatever the user is.</p><p></p><p>Appart from r,w and x there are 3 special types of permissions, which do not apply to any category like user group or others but for file or directory overall. These permissions  are <strong>SUID</strong>(Set user ID), <strong>SGID</strong>(Set group ID) and <strong>Sticky Bit</strong>.</p><p></p><p>If a file has SUID set, then it will be run by privileges of its owner instead of user running it.</p><p></p><p>We can set SUID of any file in 2 ways :</p><p></p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">chmod</span> 4xxx <span style="color:#ff9d00;font-weight:700">file</span></pre></div></p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">chmod</span> u+s <span style="color:#ff9d00;font-weight:700">file</span></pre></div></p><p></p><p><img src="images/41-2.png" alt="images/41-2.png" /></p><p></p><p>In output of stat, we can see that access of file is 0755. Here 0 shows holds special permissions like suid , sgid etc.</p><p></p><p><img src="images/41-3.png" alt="images/41-3.png" /></p><p></p><p></p><p>Note how we are able to access shadow file after setting SUID. In symbolic representation, s is shown in place of x in user&#39;s column to show that SUID is set. If file has no executable permission, there will be a S set instead.</p><p></p><p><img src="images/41-4.png" alt="images/41-4.png" /></p><p>It is not recommended to set SUID as files become vulnerable and attackers can exploit this easily.</p><p></p><p><img src="images/41-5.png" alt="images/41-5.png" /></p><p>Passwd binary also has SUID set.</p><p></p><p><img src="images/41-6.png" alt="images/41-6.png" /></p><p>These binaries are have SUID set.</p></div>
</body>
</html>
