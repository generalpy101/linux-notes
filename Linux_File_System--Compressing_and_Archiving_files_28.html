<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Compressing and Archiving files</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Compressing and Archiving files</h1><br/><p>tar is an advanced tool which can both archive and extract files where archives are easily movable in different filesystems.</p><p></p><p>There is a difference between archiving and compressing files. Archiving is taking multiple files and putting them into a single file. Like take 10 100 kb files and create an archive out of it then size of archive will be 1000 kb whereas  compressing </p><p>is taking multiple or single files and making a single file out of it with reduced size depending on type of files.</p><p></p><p>tar by default provides archiving only but with some flags we can pass contents to compressing algorithms and compress files without a dedicated compressing tool.</p><p></p><p>Some important tar flags are :</p><p></p><p><strong>-c</strong> : creates the archive out of files specified.</p><p></p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">tar</span> -c dest_tar_name source_files</pre></div></p><p></p><p>The tar file created is know as tarball.</p><p></p><p><strong>-v</strong> : Stands for verbose. Shows commands progress.</p><p></p><p><strong>-z</strong> : Also compresses files with gzip compressing utility which is most used compressing utility in linux. Usually we add <strong>.tar.gz</strong> extension or <strong>.gzip</strong> extension to archives which are also compressed, just for visual puposes.</p><p></p><p><strong>-f</strong> : Allows to specify filename for the archive.</p><p></p><p>In other linux commands order of options doesn&#39;t matters but for tar we always have to specify tar name after the -f flag.</p><p></p><p><img src="images/28-1.png" alt="images/28-1.png" /></p><p><img src="images/28-2.png" alt="images/28-2.png" /></p><p></p><p><strong>-j</strong> : Used to compress files with bzip2 compressor. bzip2 creates smaller files at the cost of speed.</p><p></p><p>We can also pass multiple files or directories to tar. To do that just list them at the end.</p><p></p><p><strong>--exclude</strong> : Used to exclude file types. Can be used multiple times.</p><p></p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">tar</span> --exclude=<span style="color:#3ad900;font-weight:400">&quot;*.mkv&quot;</span> --exclude=<span style="color:#3ad900;font-weight:400">&quot;*.mp3&quot;</span> ...</pre></div></p><p></p><p><strong>-x</strong> : Short for extract. Is used to extract the archive. All options used to archive must be used(like z for decompressing). Use <strong>-C</strong> to extract files at a different location.</p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">tar</span> -x.. tarballName -C destination_location</pre></div> </p><p></p><p><img src="images/28-3.png" alt="images/28-3.png" /></p><p></p><p>Paths are same as files original paths, our archive was in /home/generalpy/Downloads so same directory tree is created when files are extracted.</p><p><img src="images/28-4.png" alt="images/28-4.png" /></p><p></p><p><strong>-t</strong> : Used to check contents of an archive without extracting it. </p><p></p><p><img src="images/28-5.png" alt="images/28-5.png" /></p><p></p><p>Pass this output to grep to search for a particular file.</p><p></p><p><strong>/etc</strong> directory is very important as it contains configs for whole system and it is important to make a backup of it. </p><p></p><p>We can create backups of /etc with different versions according to date by using below command.</p><p></p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">sudo</span> <span style="color:#ff9d00;font-weight:700">tar</span> -cvjf etc.$<span style="color:#ff9d00;font-weight:700">(date</span> +%F<span style="color:#ff9d00;font-weight:700">)</span>.tar.bz2 <span style="color:#ff9d00;font-weight:700">/</span>etc<span style="color:#ff9d00;font-weight:700">/</span></pre></div></p><p></p><p>We will learn about use of $ in shell scripting section.</p><p></p><p>There are lot of files nowadays with <strong>.tar.xz</strong> extension. These files are compressed with lzma algorithm. tar will autodetect and extract these archives. </p><p></p><p>Note that gzip and bzip2 algorithms can be applied individually by <strong>gzip and gunzip</strong> commands for gzip and <strong>bzip2 and bunzip2</strong> commands for bzip2 algorithm. </p><p></p></div>
</body>
</html>
