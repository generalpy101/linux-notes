<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>vim</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>vim</h1><br/><p><strong>vim</strong> is a cli text editor which has some very advanced features. vim stands for <strong>VI Extended</strong>. vi is a text editor which was introduced with unix.</p><p></p><p>vim is very helpful as a text editor. We can directly start it from cli.</p><p></p><p>Usually vi comes preinstalled but in some case vim also comes preinstalled but we can install vim by <strong>sudo apt install vim</strong>.</p><p></p><p>To open a file simply write vi and name of file. vim creates file if it doesn&#39;t exists.</p><p></p><p><div class="codebox"><pre>vi filename</pre></div></p><p></p><p>sshd_config file open in vi.</p><p><img src="images/27-1.png" alt="images/27-1.png" /></p><p></p><p>vi is an alias to vim in almost all linux distros.</p><p></p><p><strong>vim is a mode based editor, it has 3 modes :</strong></p><p><strong>1. command</strong></p><p><strong>2. insert</strong></p><p><strong>3. last line</strong></p><p><strong></strong></p><p><strong>Command mode</strong> : vim by default starts in command mode. Everything you type here in command mode will be interpreted as a command which have some predefined functions like <strong>x</strong> deletes characters and <strong>r</strong> replaces a character.</p><p></p><p>To return to command mode from any mode, you can pres <strong>esc</strong> key to reach to command mode.</p><p></p><p><strong>Insert mode</strong> : To write into vim like any other text editor we have to enter insert mode. We can enter simple insert mode by pressing <strong>i</strong>(lowercase i).By pressing i we can start entering text from starting of cursor(text will be added be fore the cursor, don&#39;t get confused by it) . We can use <strong>I</strong>(uppercase i) to start inserting from beginning of line where cursor is. By pressing <strong>a</strong>(lowercase a) we can start entering text after the cursor, inverse of i(append). By pressing <strong>A</strong>(uppercase a) we can start writing at the end of line. By pressing <strong>o</strong>(lowercase o) we can start adding text below the current line and by pressing <strong>O</strong>(uppercase o) we can start adding text above the current line.</p><p></p><p><strong>Last Line mode</strong> : last line mode is used to do some file handling tasks like save file, quite file, quite with saving etc. To get to last line mode, press <strong>:</strong>(colon key) and colons will appear in the last line of the vim.</p><p></p><p>Notice the last line.</p><p><img src="images/27-2.png" alt="images/27-2.png" /></p><p></p><p>We can quit by typing <strong>q!</strong> in last line mode.</p><p>To save a file we can type <strong>w!</strong>.</p><p>We can write both of these together to save and quit(<strong>wq!</strong>).</p><p></p><p>We can write <strong>shift + zz</strong> from command mode to save and quite.</p><p></p><p>To practice and learn vim , we can write vimtutor command in terminal. It shows us a file which we can read and edit freely for practice as each time we start vimtutor that file is prepared again.</p><p></p><p>Vimtutor default file.</p><p><img src="images/27-3.png" alt="images/27-3.png" /></p><p></p><p>To run any shell command from vim, go to last line mode and then press ! and then write command you want to run.</p><p></p><p>To perform a forward search, goto command mode and then type / and then term to search. We can then navigate between matchs using <strong>n</strong> and <strong>shift + n</strong> same as less.</p><p></p><p>To perform bakcward search we type ? instead of / and then search the term. We can use <strong>G</strong> to go to end of file.</p><p></p><p>Another way to goto next occurence of current word(word where cursor is ) we can use *. Previous occurence is found with #.</p><p></p><p>To replace all occurences of any pattern with some other word we have to go to last line mode and then type <strong>%s/searched_term/term_to_replace/g</strong>. For example to replace root with toor we write %s/root/toor/g.</p><p></p><p>To return file contents to its last saved state we can use <strong>e!</strong> in last line mode. This undos everything till last save.</p><p></p><p>To undo last operation only type <strong>u</strong> which is equivalent to ctrl+z in a graphical editor. And to redo type <strong>ctrl + r</strong>.</p><p></p><p>To cut a line below the cursor press <strong>dd</strong>. This will delete line and copy it to clipboard. To paste that line press <strong>p</strong>. This will paste clipboard contents just below the cursor. To cut more than 1 line, type number of lines you want to remove and then press dd.</p><p></p><p>To copy contents, first we have to select them. We can press <strong>v</strong> to select individual characters, <strong>V</strong>(uppercase v) to select lines and <strong>ctrl + v</strong> to select rectangular blocks and then use arrow keys to navigate.</p><p></p><p>Rectangular block selection. Here contents are selected like a rectangle, same in width everywhere. For example if we select 10 character in first line and press down arrow key , then automatically next line&#39;s 10 characters will be selected.</p><p><img src="images/27-4.png" alt="images/27-4.png" /></p><p></p><p>After selecting, we can press <strong>y</strong> to copy text.y in vim means yanked which means copy in other text editors.</p><p></p><p>Press <strong>p</strong> to paste after the cursor and <strong>P</strong> to paste before the cursor.</p><p></p><p>Last line mode can be used to configure vim. Eg: <strong>set nu</strong> in last line mode is used to display line numbers in current editor window. We can remove line numbers by <strong>set nonu</strong>. nu for number.</p><p></p><p>To enable syntax highlighting we can type <strong>syntax on</strong> in last line mode and <strong>syntax off</strong> to disable it. </p><p> </p><p>Note that these changes are not permanent. They will be removed when we restart vim. To make these changes permanent, we have to create a <strong>.vimrc</strong> file in user&#39;s home directory.</p><p></p><p>In .vimrc write all vim commands you write in last line mode.</p><p></p><p>To move to a line in vim, we can type line number in the last line mode and press enter. To get to end of file press <strong>G</strong> and press <strong>gg</strong> to reach to start of file in command mode.</p><p></p><p>We can open multiple files in vim. Just simply write file names after vim to open them. We can navigate between files by typing <strong>n</strong> or <strong>next</strong> in last line mode for next file and  <strong>N</strong>  and <strong>prev</strong> in last line mode for previous file.</p><p></p><p>We can use -o flag while opening multiple files to open each file in different windows, which is known as stacked windows. We can navigate between windows by using <strong>ctrl + w</strong>.</p><p></p><p>-o flag stacked windows.</p><p><img src="images/27-5.png" alt="images/27-5.png" /></p><p></p><p>We can open files in differnece mode where we open side by side windows and show differences between files. -d flag is used for that purpose. We can navigate between files by using ctrl+w.</p><p></p><p>difference mode files.</p><p><img src="images/27-6.png" alt="images/27-6.png" /></p><p></p><p>There is one vimdiff command which runs vim with required arguments.</p><p></p><p>Note that if we close vim abruptly while a file is open like closing the terminal or pressing ctrl + j we will presented with a prompt like below : </p><p>Stopped vim.</p><p><img src="images/27-7.png" alt="images/27-7.png" />4</p><p></p><p><img src="images/27-8.png" alt="images/27-8.png" /></p><p></p><p>We can either recover the file and save it or can delete the swap file.</p><p></p><p></p></div>
</body>
</html>
