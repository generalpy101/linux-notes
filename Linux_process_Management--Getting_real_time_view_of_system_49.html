<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Getting real time view of system</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Getting real time view of system</h1><br/><p>All process viewing commands we saw till now are not realtime. We have to run those commands everytime we want to check process states.</p><p></p><p>There are some commands  in linux which are used to show realtime process info of the system.</p><p></p><p>top is one such command. top has been in existence from very early days of linux and there are many different variants of top available now.</p><p></p><p>Simple top command can be invoked by using top.</p><p><img src="images/49-1.png" alt="images/49-1.png" /></p><p></p><p>This is the default view of top which is updated every 3 seconds and we can see a flicker when top&#39;s contents are updated.</p><p></p><p>Output of top can be divided into 2 parts, summary and process info.</p><p></p><p>Summary section shows summary of the system at the current time. Summary includes  sustem uptime, load(whose values must be less than 1) cpu usage etc. Each section&#39;s details are available in man page of top.</p><p></p><p>Use q to quit the top interface.</p><p></p><p>In output of top, the running processes are higlighted(like top in above image).</p><p></p><p>There are some special letters which hold special meaning in top output screen.</p><p></p><p>Letter h is used to get help. We can press q or &lt;esc&gt; to exit help screen.</p><p><img src="images/49-2.png" alt="images/49-2.png" /></p><p></p><p>Press 1 to get usage of each core of cpu if you have multiple cores.</p><p><img src="images/49-3.png" alt="images/49-3.png" /></p><p></p><p>We can press t to switch cpu usage views. We can get simple ascii graphs or completely hide cpu info. Press multiple times to switch between views.</p><p></p><p><img src="images/49-4.png" alt="images/49-4.png" /></p><p></p><p>We can press m to get ascii graphs for memory info. Same as t, can switch between different graphs and can also hide the info.</p><p><img src="images/49-5.png" alt="images/49-5.png" /></p><p></p><p>Default refresh time of top is 3 seconds. We can change it by pressing d and then entering time. Time can also be less than 1.</p><p></p><p>Press space bar to manually refresh top output.</p><p></p><p>To highlight which column is used to sort and which process is currently running in foregroung we can use x and y respectively. On top of that, we can use b to swith between higlighting schemes, text bold highlight or whole cell highlight.</p><p>Whole cell highlighted. %CPU is used to sort outputs and top is currently running in foreground.</p><p><img src="images/49-6.png" alt="images/49-6.png" /></p><p></p><p>To change column used to sort, press &lt; or &gt; to move left and right respectively. To sort in reverse order press R.</p><p></p><p>To change memory unit press e.</p><p></p><p>Since sorting is so important, there are some dedicated shortcuts for sorting. Press P to sort by processors(CPU) and M to sort by memory.</p><p></p><p>We can use u to show only process of a praticular user.</p><p></p><p>To manage what fields are displayer and in what order they are displayed, we can use field management scree which we can access using F.</p><p></p><p><img src="images/49-7.png" alt="images/49-7.png" /></p><p></p><p>Fields which have * before them and are highlighted are currently active in top output. To select a field, navigate to that field using up and down arrow keys and then press space.</p><p></p><p>To change order in which fields are displayed , go to any field press right arrow and then move that field to desired position. Press left to move out of moving area.</p><p></p><p>Press esc and then changes will be reflected. These changes will be lost when top we quit top. Press W which stands for write to permanently write these changes.</p><p></p><p>When top refreshes, we cannot see what was the change in process. So we can instead run multiple iterations of top and then dump contents to a text file and then grep it for logging purposes.</p><p></p><p>top allows us to use command line arguments. We will use that.</p><p></p><p><div class="codebox"><pre>top -d 1 -n 3 -b &gt; out.txt</pre></div></p><p></p><p>-d is used for delay , -n is for number of iterations and -b is to start in batch mode which allows us to provide top&#39;s output to other commands.</p><p></p><p><img src="images/49-8.png" alt="images/49-8.png" /></p><p></p><p>The file contains 3 iterations of top with delay of 1 second between them. Iterations here is number of times top must run before exiting.</p><p></p><p>There is another interactive process viewer which is easier and more visually appealing than top. It is htop. It must be installed as it is not available by default in most distros.</p></div>
</body>
</html>
