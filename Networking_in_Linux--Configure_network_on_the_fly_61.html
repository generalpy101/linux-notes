<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Configure network on the fly</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Configure network on the fly</h1><br/><p>To configure any network interface, you must be running commands as root. Don&#39;t do these configs when connected to remote systems(like with ssh) as interfaces will go up/down, ip will change etc which will kick you out of the system.</p><p></p><p>To enable or disable interfaces, we can use following commands :</p><p></p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">ifconfig</span> interface up<span style="color:#ff9d00;font-weight:700">/</span>down</pre></div></p><p></p><p><img src="images/61-1.png" alt="images/61-1.png" /></p><p><img src="images/61-2.png" alt="images/61-2.png" /></p><p>Here we can see that enp0s3 is down</p><p></p><p><img src="images/61-3.png" alt="images/61-3.png" /></p><p></p><p></p><p><div class="codebox"><pre>ip link <span style="color:#ff9d00;font-weight:700">set</span> interface up</pre></div></p><p></p><p><img src="images/61-4.png" alt="images/61-4.png" /></p><p><img src="images/61-5.png" alt="images/61-5.png" /></p><p></p><p>These settings are temporary as they are lost after reboot. To make them you have to edit specific config files. For example in Ubuntu we have to edit netplan file.</p><p></p><p>To set ip of an interface we can use following methods :</p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">ifconfig</span> interface ip<span style="color:#ff9d00;font-weight:700">(in</span> cidr<span style="color:#ff9d00;font-weight:700">)</span> [optional<span style="color:#ff9d00;font-weight:700">:</span>up]</pre></div></p><p><img src="images/61-6.png" alt="images/61-6.png" /></p><p></p><p>When changing ip from ip command, we first have to delete previous values. So changing ip using ip is 3 steps process.</p><p></p><p><div class="codebox"><pre>ip addr del previous_ip<span style="color:#ff9d00;font-weight:700">(</span>with cidr<span style="color:#ff9d00;font-weight:700">)</span> dev interface<br />ip addr add new_ip<span style="color:#ff9d00;font-weight:700">(</span>with cidr<span style="color:#ff9d00;font-weight:700">)</span> dev interface</pre></div></p><p></p><p><img src="images/61-7.png" alt="images/61-7.png" /></p><p></p><p>To change default gateway of the interface we can use the following methods :</p><p></p><p>We first have to delete existing gateway.</p><p><div class="codebox"><pre>route del default gw gateway_ip<br />route add default gw new_gateway_ip</pre></div></p><p></p><p><img src="images/61-8.png" alt="images/61-8.png" /></p><p></p><p>Same goes for the ip command.</p><p></p><p><img src="images/61-9.png" alt="images/61-9.png" /></p><p></p><p>We can change the mac address of the interface by follwing methods :</p><p></p><p>When using ifconfig command we have to first disable the interface.</p><p></p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">ifconfig</span> interface down<br /><span style="color:#ff9d00;font-weight:700">ifconfig</span> interface hw ether new_mac<br /><span style="color:#ff9d00;font-weight:700">ifconfig</span> interface up</pre></div></p><p><img src="images/61-10.png" alt="images/61-10.png" /></p><p></p><p>When ip command we dont have to take down our interface.</p><p></p><p><div class="codebox"><pre>ip link <span style="color:#ff9d00;font-weight:700">set</span> dev interface address new_mac</pre></div></p><p><img src="images/61-11.png" alt="images/61-11.png" /></p></div>
</body>
</html>
