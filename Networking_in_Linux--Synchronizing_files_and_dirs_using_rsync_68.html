<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Synchronizing files and dirs using rsync</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Synchronizing files and dirs using rsync</h1><br/><p>rsync is a complex but very useful file syncing tool which is very useful when making backups or mirroring directories anyhwhere in the linux world.</p><p></p><p>rsync doesn&#39;t performs simple copy, it syncs files. Here synching means that files will be copied if they don&#39;t exist or files have been changed in any way.</p><p></p><p>For local file synching</p><p><div class="codebox"><pre>rsync [options] <span style="color:#ff9d00;font-weight:700">source</span> destination</pre></div></p><p></p><p><img src="images/68-1.png" alt="images/68-1.png" /></p><p></p><p>Here -a flag stands for archive and it is combination of multiple options(research yet to be done). It basically preserves every attribute of the file and dirs including symlinks. -v stands for verbose.</p><p><img src="images/68-2.png" alt="images/68-2.png" /></p><p></p><p>Let us try running same command again, no files have been changed.</p><p></p><p><img src="images/68-3.png" alt="images/68-3.png" /></p><p>Nothing changed so nothing was copied.</p><p></p><p><img src="images/68-4.png" alt="images/68-4.png" /></p><p></p><p>New file was created in source directory so it was copied.</p><p></p><p>We can also make rsync delete non existing source dir files in destination directory. Use --delete flag to do that.</p><p><img src="images/68-5.png" alt="images/68-5.png" /></p><p></p><p>Note that trailing slash plays important role when using rsync. When we use trailing slash with a directory(like changed_dir/), contents of that directory are synced but when we don&#39;t use trailing slash, whole directory is synced.</p><p><img src="images/68-6.png" alt="images/68-6.png" /></p><p></p><p>We can also exclude files and dirs from syncing using --exclude-from and --exclude flags. --exclude-from requires a file in which all items to be excluded are written whereas when using --exclude, we can specify to exclude individual items.</p><p></p><p><img src="images/68-7.png" alt="images/68-7.png" /></p><p></p><p>Note how dir3, mkv files and png files weren&#39;t copied.</p><p></p><p>We can also use --exclude=&quot;*.mkv&quot; --exclude=&quot;*.png&quot; --exclude=&quot;dir3&quot; here if we don&#39;t want  to use exclude file.</p><p></p><p>Use --delete-excluded to remove those non empty dirs.</p><p></p><p><h2>USING RSYNC OVER A NETWORK</h2></p><p></p><p>Rsync can also be used to sync files over a remote server. We can use rsync to sync files, all we need is a ssh access to the remote machine.</p><p></p><p>User in local machine must have read access and user of remote machine must have write access for this to work.</p><p></p><p><div class="codebox"><pre>rsync [options] -e <span style="color:#ff9d00;font-weight:700">ssh</span> <span style="color:#ff9d00;font-weight:700">source</span> dest</pre></div></p><p><img src="images/68-8.png" alt="images/68-8.png" /></p><p><img src="images/68-9.png" alt="images/68-9.png" /></p><p>Same options are available as one with local rsync.</p><p></p><p>We can also use different port or even whole ssh commands. After -e, in quotes we can enter ssh commands. </p><p><img src="images/68-10.png" alt="images/68-10.png" /></p><p></p><p><img src="images/68-11.png" alt="images/68-11.png" /></p></div>
</body>
</html>
