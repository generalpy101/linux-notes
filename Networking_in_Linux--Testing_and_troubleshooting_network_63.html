<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Testing and troubleshooting network</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Testing and troubleshooting network</h1><br/><p>When it comes to troubleshooting the network, the first command to come into mind must be ping. The ping command sends out icmp echo request packets which when reached at host are replied by the icmp reply. If reply is received, we can confirm that the host is reachable. </p><p></p><p> <div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">ping</span> domain_name<span style="color:#ff9d00;font-weight:700">/</span>ip_address</pre></div></p><p> This will send ping request packets until we press ctrl+c to interupt.</p><p> <img src="images/63-1.png" alt="images/63-1.png" /></p><p> One ip address can be associated with multiple domain names thus here we are getting a different domain name with the same ip in ping as ping first performs reverse dns lookup. To prevent reverse dns lookup, we can use -n flag.</p><p> <img src="images/63-2.png" alt="images/63-2.png" /></p><p> To send n number of packets instead of unlimited packets, we use -c flag followed by the number of packets.</p><p> <img src="images/63-3.png" alt="images/63-3.png" /></p><p> </p><p> Let us understand what each line in ping output means.</p><p> </p><p> The 64 bytes at the beginning is the packet size, icmp_seq is the sequence of packets which also determines route taken by the packets and sometimes can be used to troubleshoot problems. If icmp_seq is different like 1,3,2,5,4 then it means that packets are coming thru different routes which cannot be changed usually. ttl is the time to live which is the number of hops or routers the packet travelled and time also k/a round trip time(rtt) is the time taken for one round trip . rtt below 30 ms is a very fast connection. High rtt means connection cannot be used for services like voice communication or voip.</p><p> </p><p> By default, each icmp echo packet is sent at an interval of 1 second. We can change this behaviour by using -i flag. Note that only sudo user can send packets with interval less than 0.2 s.</p><p> </p><p> <img src="images/63-4.png" alt="images/63-4.png" /></p><p><img src="images/63-5.png" alt="images/63-5.png" /></p><p></p><p>We can use -q flag to only get summary of the ping.</p><p><img src="images/63-6.png" alt="images/63-6.png" /></p><p></p><p>We can use -t option to configure ttl of the packet. When a machine receives packet with ttl 1, it discards it and returns a time limit exceded packet(ttl is reduced at each hop). So we can manipulate this behaviour to know the path of our packet. </p><p></p><p><img src="images/63-7.png" alt="images/63-7.png" /></p><p>ttl of 1 means our packet will only reach till our router(default gateway), 2 means one hop above our default gateway and so on.</p><p></p><p>To troubleshoot any network, we can follow below mentioned steps :</p><p></p><p>1. Ping your default gateway.</p><p><img src="images/63-8.png" alt="images/63-8.png" /></p><p>If you cannot ping your router, then either your router is dropping your packets, your ip is not configured correctly, network config is wrong and variety of reasons.</p><p></p><p>2. Ping a public and stable dns like google dns 8.8.8.8 or cloudflare dns 1.1.1.1.</p><p><img src="images/63-9.png" alt="images/63-9.png" /></p><p>If we don&#39;t get any reply here, either dns server is not configured correctly or our network is not configured properly.</p><p></p><p>3. Ping a stable and public domain like google.com</p><p><img src="images/63-10.png" alt="images/63-10.png" /></p><p></p><p>If there is a problem here, either there is a problem with dns config, or host might be down or there can be problem in our own network.</p><p></p><p>Sometimes firewalls also block ping probes.</p></div>
</body>
</html>
