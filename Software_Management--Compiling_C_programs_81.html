<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Compiling C programs</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Compiling C programs</h1><br/><p><img src="images/81-1.png" alt="images/81-1.png" /></p><p></p><p><strong><span style="text-decoration:underline;">Compiling ProFTPD from source - Practice</span></strong></p><p></p><p>ProFTP is a very famous FTP server which is used in unix like os.</p><p></p><p>First step of compiling from source is to download the tarball of the package.</p><p><img src="images/81-2.png" alt="images/81-2.png" /></p><p></p><p>Once downloaded we will now extract the archive.</p><p><img src="images/81-3.png" alt="images/81-3.png" /></p><p></p><p><img src="images/81-4.png" alt="images/81-4.png" /></p><p>src directory contains source code for our package. </p><p></p><p>One step which is optional is to check hash of tarball before extracting.</p><p></p><p>After extracting we will use configure executable file to know all available options. configure will check all dependencies, report errors if some dependencies are unmet, and we can also specify extra options with configure which are available. configure will then create MakeFile. </p><p></p><p>Make is a program which is used to automate compilation process. It will compile multiple source files automatically. To use make, we have to use a special file called MakeFile which holds instructions required for compilation.</p><p></p><p><img src="images/81-5.png" alt="images/81-5.png" /></p><p>Configure --help output with less. Here --prefix option is recommended to use everytime we build our own packages. --prefix will specify where to install our files, if not specified, packages will be automatically installed at default location /usr/local/ in this case which can sometimes cause problems. There also many program specific options available.</p><p></p><p>Now we will invoke configure with our required flags(here we will only use prefix). Do not proceed until all errors encountered by configure are fixed. It is advised to install applications inside /opt/ directory.</p><p><img src="images/81-6.png" alt="images/81-6.png" /></p><p>Output of configure. </p><p></p><p>After configure finishes, use make command to compile source code.</p><p>Fix any errors if occured.</p><p><img src="images/81-7.png" alt="images/81-7.png" /></p><p></p><p>After make finishes use command <em>sudo make install</em>. make install will move compiled code to /opt/proftpd(our destination directory).</p><p><img src="images/81-8.png" alt="images/81-8.png" /></p><p></p><p>And we are done!!</p><p><img src="images/81-9.png" alt="images/81-9.png" /></p><p></p><p>Our binary is in sbin directory. To remove application, just delete this directory(/opt/proftpd).</p><p></p><p>We cannot run source build applications by systemctl(like other servers which are installed by apt). We have to run them manually each time and stop them by killing its process. We can create a script to automate this process.</p><p></p><p>We can compile in a single step by</p><p><div class="codebox"><pre>.<span style="color:#ff9d00;font-weight:700">/</span>configure [options] <span style="color:#ff9d00;font-weight:700">&amp;&amp;</span> <span style="color:#ff9d00;font-weight:700">make</span> <span style="color:#ff9d00;font-weight:700">&amp;&amp;</span> <span style="color:#ff9d00;font-weight:700">sudo</span> <span style="color:#ff9d00;font-weight:700">make</span> <span style="color:#ff9d00;font-weight:700">install</span></pre></div></p><p>If error occurs in any command, next command will not run. Only run make install as admin.</p></div>
</body>
</html>
