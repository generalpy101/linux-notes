<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Task Automation and Scheduling using Cron</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>Task Automation and Scheduling using Cron</h1><br/><p>Cron is used to perform a task repeadately at a specific time. Cron runs as an daemon and the scheduled tasks are known as cronjobs.</p><p></p><p>crontab, short for cron tables can mean 3 things :</p><p></p><p>1. Each user have its own crontab file inside /var/spool/cron/crontab directory. User can define cronjobs in this file.</p><p></p><p><img src="images/83-1.png" alt="images/83-1.png" /></p><p></p><p>2. There are system wide crontabs available in /etc/cron which run system wide cron jobs.</p><p><img src="images/83-2.png" alt="images/83-2.png" /></p><p></p><p>3. crontab is a command which is used to manage cronjobs for users.</p><p></p><p>crontab for user is basically a file in which user&#39;s cront jobs are stored. It can be added directly as it is a text file but it is usually not recommended. Use crontab command to edit user&#39;s crontab file. It will open crontab file in default text editor and then verify file contents before exiting.</p><p></p><p>To list crontab file for current user user :</p><p><div class="codebox"><pre>crontab -l</pre></div></p><p></p><p><img src="images/83-3.png" alt="images/83-3.png" /></p><p></p><p>Use <em>crontab -e</em> to open crontab file in editor. If file doesn&#39;t exists, crontab will create one.</p><p></p><p>If no default editor is selected, crontab will give option to select an editor.</p><p></p><p><img src="images/83-4.png" alt="images/83-4.png" /></p><p></p><p>We can run a cron job according to minute, hour ,day of month , month  and day of week. We don&#39;t need to remember the format as it is already commented inside the default crontab file.</p><p></p><p>Syntax for cronjob is :</p><p><div class="codebox"><pre>minute hour day_of_month month day_of_week <span style="color:#ff9d00;font-weight:700">command</span></pre></div></p><p>To run cronjob for all instance of that time period use * in its place. Like to run a cronjob every minute we can put * in the minute column.</p><p></p><p>Hour is in 24 hour format with range of 0 to 23. Day of week range from 0-7 with 0 and 7 being sunday.</p><p></p><p>Examples :</p><p></p><p>To run a task every day at 4 pm.</p><p></p><p>0 16 * * * command</p><p></p><p>To run a task every monday at midnight </p><p></p><p>0 0 * * 1 command</p><p></p><p>To run a task first day of month at midnight</p><p></p><p>0 0 1 * * command</p><p></p><p>We  can separate times with , to list multiple times for same job</p><p></p><p>Examples :</p><p></p><p>To run a task every day at 4 am and 4 pm</p><p></p><p>0 4,16 * * * command</p><p></p><p>To run a task every monday and saturday</p><p></p><p> * * * * 1,6 command</p><p> </p><p>We can use - to use a range for time</p><p></p><p>Examples :</p><p></p><p>To perform a task every work day between 9am to 5pm</p><p></p><p> * 9-17 * * 1-5 command</p><p> </p><p>To perform a task every day between jan and april</p><p></p><p>  0 0 1 1-4 * command</p><p>  </p><p> We perform a task after a time interval ,we can use / and specify the time after that.</p><p> </p><p> Examples :</p><p> </p><p> To perform a task every minute.</p><p> </p><p>  */1 * * * * command</p><p>  </p><p> To perform a task every 3rd weekday.</p><p> </p><p>  0 0 * * */3 command.</p><p>  </p><p>There are also predefined macros for cron available which can be used to perform general tasks</p><p> </p><p>@yearly to do a job on 1st day midnight of every year</p><p>@monthly to do a job on 1st day midnight of every year</p><p>@weekly to do a job on sunday midnight every week</p><p>@hourly to do a job  every hour</p><p>@daily to perform a job every day midnight</p><p>@reebot to perform a job at every boot</p><p></p><p><img src="images/83-5.png" alt="images/83-5.png" /></p><p></p><p>Let&#39;s create a cron job that appends current timestamp to a file every minute.</p><p></p><p>Cronjob for it will be</p><p></p><p><div class="codebox"><pre>*<span style="color:#ff9d00;font-weight:700">/</span>2 * * * * <span style="color:#ff9d00;font-weight:700">date</span> &gt;&gt; <span style="color:#ff9d00;font-weight:700">/</span>temp<span style="color:#ff9d00;font-weight:700">/</span>date_time.txt</pre></div></p><p></p><p>We will now see logs for crontab which are stored in /var/log/syslog in ubuntu and /var/log/cron in centos.</p><p><img src="images/83-6.png" alt="images/83-6.png" /></p><p></p><p>Note that root can list, edit and remove crontab file for any user by using -u and specifying username</p><p></p><p><div class="codebox"><pre><span style="color:#ff9d00;font-weight:700">sudo</span> crontab [option -u username</pre></div></p><p></p><p>To remove a crontab file use -r option with crontab file.</p><p></p><p>There are some sites like <a href="https://crontab.guru/">https://crontab.guru/</a> which can be used to schedule time for cronjobs easily.</p><p></p><p>System wide cronjobs can be found inside /etc/cron.</p><p></p><p><img src="images/83-7.png" alt="images/83-7.png" /></p><p>To run a cron job according to a time which are described above(cron.daily and others) simply put the scripts in respective directories.</p><p></p><p><img src="images/83-8.png" alt="images/83-8.png" /></p><p></p><p>Note that crontab uses environvariables of its own which also includes its path, hence take care of path when using corntabs. Use absolute paths wherever possible.</p><p></p><p>Cron is used for machines which run continously which means if machine is switched of and it missed a task, that task is not run when machine is run. Also cron provides no error control for the jobs.</p><p></p></div>
</body>
</html>
