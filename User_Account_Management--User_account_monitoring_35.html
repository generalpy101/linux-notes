<!doctype html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>User account monitoring</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles4.css" type="text/css" />
</head>
<body>
<div class='page'><h1 class='title'>User account monitoring</h1><br/><p>In linux, any user can login at any time using su command which can sometimes make tracking of user activity hard. So to tackle this, linux store 2 type of user ids. First is <strong>Real User ID(RUID)</strong> and second one is <strong>Effective User ID(EUID)</strong>.</p><p></p><p>RUID is of the user who initially logs in and EUID changes according to user switching. Let us assume we initially log in as generalpy and then switch to apple. Here RUID is of generalpy and EUID is of apple.</p><p></p><p><strong>whoami</strong> command is used to print name of effective user. It is same as runnign <strong>id -un</strong>.</p><p></p><p><img src="images/35-1.png" alt="images/35-1.png" /></p><p></p><p><strong>who</strong> command is used to print info about the real user.</p><p></p><p><strong>id</strong> command without any flags is used to print username and groups for effective user.</p><p></p><p><img src="images/35-2.png" alt="images/35-2.png" /></p><p></p><p>who command simply parses and prints contents of /var/run/utmp file. That file stores current user logs of the system.</p><p><img src="images/35-3.png" alt="images/35-3.png" /></p><p></p><p>/var/log/wtmp which is like a history file which stores all users login and logout activity in the past. It is like a history for utmp file.</p><p></p><p><img src="images/35-4.png" alt="images/35-4.png" /></p><p></p><p>We can use who with -a flag to show more info about the real user.</p><p></p><p>A simple <strong>w</strong> command shows who is logged in to pc and what they are currently doing.</p><p></p><p><img src="images/35-5.png" alt="images/35-5.png" /></p><p></p><p>In output of w command, in first line, first field shows current time, second field shows total system uptime which is 7 hrs 44 min in our case and the load average field shows load on system in last 1 min, 5 mins and 15 mins. It must be less than 1. If it is more than 1 that means there is some problem.</p><p></p><p>We can get the system uptime and other info by using uptime command.</p><p><img src="images/35-6.png" alt="images/35-6.png" /></p><p></p><p>The user sessions are written into a file named /var/log/wtmp file. The <strong>last</strong> command shows last lines of that file. It can be used to track any malicious activity.</p><p>Records are printed in reverse order.</p><p><img src="images/35-7.png" alt="images/35-7.png" /></p><p></p><p>To get user specific details, give name of user to last command. </p><p></p><p></p><p></p><p></p></div>
</body>
</html>
